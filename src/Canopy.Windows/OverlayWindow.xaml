<Window
    x:Class="Canopy.Windows.OverlayWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Canopy.Windows"
    Title="Canopy Overlay">

    <Grid x:Name="Root" Background="Transparent">

        <Image x:Name="OverlayBorder"
                           Width="280"
                           Height="520"
                           IsHitTestVisible="False"
                           Opacity="1"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />
        
        <!-- Main overlay card -->
        <Border Background="#C8000000"
                CornerRadius="8"
                BorderBrush="#00FFFFFF"
                Margin="4"
                Padding="24">
            <!-- Use a UserControl-like wrapper for VisualStateManager -->
            <Grid x:Name="RootLayoutGrid" RowSpacing="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Header -->
                    <RowDefinition Height="Auto"/> <!-- Points counter -->
                    <RowDefinition Height="*"/>    <!-- Statistics grid -->
                </Grid.RowDefinitions>

                <!-- Header: Game name and status -->
                <StackPanel Grid.Row="0" HorizontalAlignment="Center" Spacing="4" Padding="0,0,0,16">
                    <TextBlock x:Name="GameNameText"
                               Text="No game running"
                               Foreground="White"
                               FontSize="22"
                               FontWeight="SemiBold"
                               HorizontalAlignment="Center"/>
                    <TextBlock x:Name="GameStatusText"
                               Text="sleeping - start a game to wake"
                               Foreground="#80FFFFFF"
                               FontSize="12"
                               HorizontalAlignment="Center"/>
                </StackPanel>

                <!-- Animated rings -->
                <Border 
                        Grid.Row="1"
                        Background="#4400AA00"
                        Width="80"
                        Height="80"
                        CornerRadius="100"
                        Opacity="0.9" />

                <Border Grid.Row="1"
                        Background="#4400AA00"
                        Width="120"
                        Height="120"
                        CornerRadius="100"
                        Opacity="0.6" />

                <!-- Points counter ring and content -->
                <Border x:Name="AnimatedCounterBorder"
                        Grid.Row="1"
                        Background="#4400AA00"
                        Width="150"
                        Height="150"
                        CornerRadius="100"
                        Opacity="0.8"   
                        RenderTransformOrigin="0.5,0.5">
                    <Border.RenderTransform>
                        <ScaleTransform x:Name="AnimatedBorderScale" ScaleX="1" ScaleY="1"/>
                    </Border.RenderTransform>
                </Border>

                <StackPanel Grid.Row="1" HorizontalAlignment="Center" Width="150" Spacing="4" Height="100">
                    <TextBlock x:Name="PointsText" Text="--" Foreground="White" FontSize="48" FontWeight="Bold" HorizontalAlignment="Center" Padding="0,12,0,0" />
                    <TextBlock Text="POINTS EARNED" Foreground="#80FFFFFF" FontSize="16" HorizontalAlignment="Center" />
                </StackPanel>

                <!-- Statistics grid (2 columns) -->
                <Grid Height="300" Grid.Row="2" ColumnSpacing="12" RowSpacing="32" Padding="0,16,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Stat 1 -->
                    <StackPanel Grid.Row="0" Grid.Column="0"  Spacing="2">
                        <TextBlock x:Name="Stat1Label" Text="Total Points" Foreground="#80FFFFFF" FontSize="14" TextAlignment="End"/>
                        <TextBlock x:Name="Stat1Value" Text="--" Foreground="White" FontSize="24" FontWeight="SemiBold" TextAlignment="End"/>
                        <TextBlock x:Name="Stat1Helptext" Text="Since 2025 April" Foreground="#88FFFFFF" FontSize="11" FontWeight="SemiBold" TextAlignment="End"/>
                    </StackPanel>

                        <!-- Stat 2 -->
                    <StackPanel Grid.Row="0" Grid.Column="1" Spacing="2">
                        <TextBlock x:Name="Stat2Label" Text="Donations Made" Foreground="#80FFFFFF" FontSize="12" TextAlignment="End"/>
                        <StackPanel Orientation="Horizontal" Spacing="2" HorizontalAlignment="Right">
                            <TextBlock x:Name="Stat2Value" Text="8" Foreground="White" FontSize="24" FontWeight="SemiBold" TextAlignment="End"/>
                            <TextBlock x:Name="Stat2SubVvalue" Text="+2" Foreground="LightGreen" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Bottom"/>
                        </StackPanel>
                        <TextBlock x:Name="Stat2Helptext" Text="Via Canopy" Foreground="#88FFFFFF" FontSize="11" FontWeight="SemiBold" TextAlignment="End"/>
                    </StackPanel>
                    

                    <!-- Stat 3 -->

                    <StackPanel Grid.Row="1" Grid.Column="0" Spacing="2">
                       <TextBlock x:Name="Stat3Label" Text="To New Donation" Foreground="#80FFFFFF" FontSize="11" TextAlignment="End"/>
                       <TextBlock x:Name="Stat3Value" Text="88.80%" Foreground="White" FontSize="24" FontWeight="SemiBold" TextAlignment="End"/>
                       <TextBlock x:Name="Stat3Helptext" Text="840 points to go" Foreground="#88FFFFFF" FontSize="11" FontWeight="SemiBold" TextAlignment="End"/>
                    </StackPanel>
                    

                    <!-- Stat 4 -->
                    <StackPanel Grid.Row="1" Grid.Column="1"  Spacing="2">
                        <TextBlock x:Name="Stat4Label" Text="Total Donations" Foreground="#80FFFFFF" FontSize="11" TextAlignment="End"/>
                        <StackPanel Orientation="Horizontal" Spacing="2" HorizontalAlignment="Right">
                            <TextBlock x:Name="Stat4Value" Text="8" Foreground="White" FontSize="24" FontWeight="SemiBold" TextAlignment="End"/>
                            <TextBlock x:Name="Stat4SubVvalue" Text="+2" Foreground="LightGreen" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Bottom"/>
                        </StackPanel>
                        <TextBlock x:Name="Stat4Helptext" Text="Community Wide" Foreground="#88FFFFFF" FontSize="11" FontWeight="SemiBold" TextAlignment="End"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <!-- Drag overlay shown when drag mode is enabled - must be on top -->
        <Border x:Name="DragHandle"
                Background="#80EAB308"
                Visibility="Collapsed"
                PointerPressed="DragHandle_PointerPressed"
                PointerMoved="DragHandle_PointerMoved"
                PointerReleased="DragHandle_PointerReleased"
                PointerCaptureLost="DragHandle_PointerCaptureLost"
                CornerRadius="8"
                Margin="4">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <FontIcon Glyph="&#xE759;" FontSize="32" Foreground="#EAB308" Margin="0,0,0,8"/>
                <TextBlock Text="Drag to Move"
                           Foreground="#EAB308"
                           FontSize="18"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Press shortcut again to exit"
                           Foreground="#EAB308"
                           FontSize="12"
                           HorizontalAlignment="Center"
                           Opacity="0.8"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
